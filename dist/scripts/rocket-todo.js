$(function(){"use strict";!function(a){var b=[],c=!1,d=!1,e=a(".todo-app"),f=e.find(".todo-input"),g=e.find(".alert"),h=e.find(".tasks-list"),i=e.find(".pending-tasks"),j=e.find(".delete-all-complete"),k=e.find(".sort ");rocketDashboard.Apps.todo=function(){function l(){for(var a=b.length;a--;)b[a].complete===!0&&b.splice(a,1);m(b)}function m(b){if(h.html(""),b.length){c=!1;var e=b.length;a.each(b,function(b,f){var g=a('<li class="list-group-item task"><a href="#" class="delete"><i class="fa fa-times"></i></a><span class="task-name">'+f.taskName+'</span><input type="checkbox" class="complete pull-right" /></li>');f.complete===!0?(c=!0,g.addClass("done").find(".complete").attr("checked","chekced"),e-=1,"pending"===d&&g.css("display","none")):"done"===d&&g.css("display","none"),g.find(".complete").change(function(){var b=a(this).parents("li").index();a(this).is(":checked")?rocketDashboard.Apps.todo.setTaskState(b,!0):rocketDashboard.Apps.todo.setTaskState(b,!1)}),g.find(".delete").click(function(b){b.preventDefault();var c=a(this).parents("li").index();rocketDashboard.Apps.todo.removeTask(c)}),h.append(g)}),i.find(".pending-number").text(e),a(".pending-text").text(1===e?"Pending task":"Pending tasks"),i.show(),c?j.show():j.hide(),e&&c?k.show():k.hide(),"done"===d&&c===!1&&(h.children("li").not(".done").fadeIn(),k.find("ul li:eq(0) a").trigger("click")),"pending"===d&&0===e&&(h.children("li.done").fadeIn(),k.find("ul li:eq(0) a").trigger("click"))}else c=!1,j.hide(),i.hide()}return{init:function(){b[0]={taskName:"Here's something to do",complete:!1},b[1]={taskName:"You've already done this",complete:!0},b[2]={taskName:"But you have yet to complete this",complete:!1},m(b),e.submit(function(a){a.preventDefault();var b=f.val();b?(rocketDashboard.Apps.todo.addTask(b),f.val(""),g.is(":visible")&&g.fadeOut()):g.fadeIn()}),k.find("a").click(function(b){b.preventDefault();var c=a(this),e=c.data("sort");switch(c.addClass("active").parent().siblings().find("a").removeClass("active"),e){case"pending":h.children("li.done").fadeOut(),h.children("li").not(".done").fadeIn(),d="pending";break;case"done":h.children("li").not(".done").fadeOut(),h.children("li.done").fadeIn(),d="done";break;case"all":h.children("li").fadeIn(),d=!1}}),j.click(function(a){a.preventDefault(),l()}),g.find(".close").click(function(a){a.preventDefault(),g.fadeOut()})}(),addTask:function(a){b.push({taskName:a,complete:!1}),m(b)},removeTask:function(a){b.splice(a,1),m(b)},setTaskState:function(a,c){b[a].complete=c,m(b),console.log(b)}}}()}(jQuery,window)});